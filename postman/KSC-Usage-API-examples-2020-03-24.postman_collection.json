{
	"info": {
		"_postman_id": "c85711c8-e031-4888-9715-c589f676fb5e",
		"name": "KSC Usage API",
		"description": "KeySafe-Cloud (KSC) Application Programming Interface (API) usage via Postman",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "List all locks",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "c055371a-e416-4213-84e0-23b6332926d1",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "X-Api-Key",
						"value": "{{YourApiKey}}",
						"description": "Your API-Key, here a Postman collection variable"
					}
				],
				"url": {
					"raw": "https://keysafe-cloud.appspot.com/api/v1/locks",
					"protocol": "https",
					"host": [
						"keysafe-cloud",
						"appspot",
						"com"
					],
					"path": [
						"api",
						"v1",
						"locks"
					]
				},
				"description": "List all locks in your inventory as specified by the API Access Key provided as the YourApiKey collection variable in Postman. Use the ... of the collection and select Edit to \"Edit the Collection\"; then select the Variables tab to see and modify the YourApiKey collection variable."
			},
			"response": []
		},
		{
			"name": "List specific lock(s)",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "c055371a-e416-4213-84e0-23b6332926d1",
						"exec": [
							"// modify the lock_uids variable to one or more lock_uids (as seen in \"List all locks\" results);",
							"// note that the lock_uid of a lock is also part of the QR / DataMatrix code on the lock sticker",
							"pm.environment.set(\"lock_uids\", \"deadbeef0000deadbeef,00deadbeef00deadbeef\");",
							"console.log(\"Specific lock_uids to be queried:\", pm.environment.get(\"lock_uids\"));"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"type": "text",
						"value": "application/json"
					},
					{
						"description": "Your API-Key, here a Postman collection variable",
						"key": "X-Api-Key",
						"value": "{{YourApiKey}}"
					}
				],
				"url": {
					"raw": "https://keysafe-cloud.appspot.com/api/v1/locks?lock_uids={{lock_uids}}",
					"protocol": "https",
					"host": [
						"keysafe-cloud",
						"appspot",
						"com"
					],
					"path": [
						"api",
						"v1",
						"locks"
					],
					"query": [
						{
							"key": "lock_uids",
							"value": "{{lock_uids}}"
						}
					]
				},
				"description": "Update the Pre-request Script to specify the lock\\_uids to be queried for when listing locks. In the original example it sets the environment variable lock\\_uids to \"deadbeef0000deadbeef,00deadbeef00deadbeef\" to be provided as a URL parameter value. It will try to select these specific values (multiple, as there is a comma-separator). While it is expected that the original example provides an empty list as result (with success), because the query does succeed while not finding the artifical lock\\_uids example values. Adjust to values known to work in your inventory."
			},
			"response": []
		},
		{
			"name": "Retrieve lock details",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "c055371a-e416-4213-84e0-23b6332926d1",
						"exec": [
							"// modify the lock_id variable to a specific lock_id (as seen in \"List all locks\" results)",
							"pm.environment.set(\"lock_id\", \"0102030405060708\");",
							"console.log(\"Specific lock_id to be retrieved:\", pm.environment.get(\"lock_id\"));"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "X-Api-Key",
						"value": "{{YourApiKey}}",
						"description": "Your API-Key, here a Postman collection variable"
					}
				],
				"url": {
					"raw": "https://keysafe-cloud.appspot.com/api/v1/locks/{{lock_id}}",
					"protocol": "https",
					"host": [
						"keysafe-cloud",
						"appspot",
						"com"
					],
					"path": [
						"api",
						"v1",
						"locks",
						"{{lock_id}}"
					]
				},
				"description": "Update the Pre-request Script to specify the lock\\_id for which to retrieve the lock details. The original example value for lock\\_id is \"0102030405060708\", which is unlikely to be found in your inventory. Thus the 404 \"Not Found\" result is expected and the description will help you interpret the error response."
			},
			"response": []
		},
		{
			"name": "Claim a lock",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "c055371a-e416-4213-84e0-23b6332926d1",
						"exec": [
							"// modify the lock_uid variable to a specific value based on scanning the QR / DataMatrix on the lock sticker",
							"pm.environment.set(\"lock_uid\", \"deadbeef0000deadbeef\");",
							"console.log(\"Specific lock_uid to claim:\", pm.environment.get(\"lock_id\"));",
							"",
							"// modify the claim_code variable to a specific value based on (part of) the QR / DataMatrix scanned",
							"pm.environment.set(\"claim_code\", \"deadbeef00deadbeef01deadbeef0203\");",
							"console.log(\"Specific claim_code to claim:\", pm.environment.get(\"claim_code\"));",
							"",
							"// use a more useful reference or comment this out",
							"pm.environment.set(\"reference\", \"Test\");"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					},
					{
						"description": "Your API-Key, here a Postman collection variable",
						"key": "X-Api-Key",
						"value": "{{YourApiKey}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"claim_code\": \"{{claim_code}}\",\r\n  \"lock_uid\": \"{{lock_uid}}\",\r\n  \"reference\": \"{{reference}}\"\r\n}"
				},
				"url": {
					"raw": "https://keysafe-cloud.appspot.com/api/v1/locks",
					"protocol": "https",
					"host": [
						"keysafe-cloud",
						"appspot",
						"com"
					],
					"path": [
						"api",
						"v1",
						"locks"
					]
				},
				"description": "Demonstrates how to claim a lock into your inventory as specified by the API Access Key provided as the YourApiKey collection variable in Postman. Use the ... of the collection and select Edit to \"Edit the Collection\"; then select the Variables tab to see and modify the YourApiKey collection variable.\n\nAdjust which lock\\_uid to claim with which claim\\_code in the Pre-request Script tab. Consult the Postman documentation to see how a CSV or JSON file could be iterated over to make batch requests (and note that it is recommended to debug that approach with a read-only GET request first)."
			},
			"response": []
		},
		{
			"name": "Obtain an eKey",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "c055371a-e416-4213-84e0-23b6332926d1",
						"exec": [
							"// modify the lock_id variable to a specific lock_id (as seen in \"List all locks\" results)",
							"pm.environment.set(\"lock_id\", \"0102030405060708\");",
							"console.log(\"Specific lock_id for which to obtain eKey:\", pm.environment.get(\"lock_id\"));",
							"",
							"pm.environment.set(\"position\", \"1\");",
							"console.log(\"Slot position [0, 7] for which to obtain eKey:\", pm.environment.get(\"position\"));",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					},
					{
						"description": "Your API-Key, here a Postman collection variable",
						"key": "X-Api-Key",
						"value": "{{YourApiKey}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"hours\": 24,\r\n  \"passkey_type\": \"otp\",\r\n  \"nr_of_passkeys\": 16,\r\n  \"segmented\": true,\r\n  \"tag\": \"Order #2016-678\"\r\n}"
				},
				"url": {
					"raw": "https://keysafe-cloud.appspot.com/api/v1/locks/{{lock_id}}/slots/{{position}}",
					"protocol": "https",
					"host": [
						"keysafe-cloud",
						"appspot",
						"com"
					],
					"path": [
						"api",
						"v1",
						"locks",
						"{{lock_id}}",
						"slots",
						"{{position}}"
					]
				},
				"description": "Update the Pre-request Script to specify the lock\\_id for which to set the status; note that it is also possible to determine the status to set. In the original example the status is set to \"defect\", which you will want to revert to \"active\" afterwards.\n\nIMPORTANT: Note that setting the status to \"rma\" or \"unrecoverable\" is a one way street and there is no recovery; for all states and their impact/limitations consult the API documentation."
			},
			"response": []
		},
		{
			"name": "Set lock status",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "c055371a-e416-4213-84e0-23b6332926d1",
						"exec": [
							"// modify the lock_id variable to a specific lock_id (as seen in \"List all locks\" results)",
							"pm.environment.set(\"lock_id\", \"0102030405060708\");",
							"console.log(\"Specific lock_id for which to set status:\", pm.environment.get(\"lock_id\"));",
							"",
							"pm.environment.set(\"new_status\", \"defect\");",
							"//pm.environment.set(\"new_status\", \"active\");",
							"",
							"// use a more useful reference or comment this out;",
							"// for setting RMA, use a reference as provided by the manufacturer",
							"pm.environment.set(\"reference\", \"Test\");"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"description": "Your API-Key, here a Postman collection variable",
						"key": "X-Api-Key",
						"value": "{{YourApiKey}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"lock_status\": \"{{new_status}}\",\r\n  \"reference\": \"{{reference}}\"\r\n}"
				},
				"url": {
					"raw": "https://keysafe-cloud.appspot.com/api/v1/locks/{{lock_id}}/status",
					"protocol": "https",
					"host": [
						"keysafe-cloud",
						"appspot",
						"com"
					],
					"path": [
						"api",
						"v1",
						"locks",
						"{{lock_id}}",
						"status"
					]
				},
				"description": "Update the Pre-request Script to specify the lock\\_id for which to set the status; note that it is also possible to determine the status to set. In the original example the status is set to \"defect\", which you will want to revert to \"active\" afterwards.\n\nIMPORTANT: Note that setting the status to \"rma\" or \"unrecoverable\" is a one way street and there is no recovery; for all states and their impact/limitations consult the API documentation."
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "ac632760-b136-48d3-aa95-2f13abcaa5a1",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "717860be-6d31-4d7e-9ec5-f8c43abcd128",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "b2699362-85be-461d-ba1d-2fa5ab23d3d3",
			"key": "YourApiKey",
			"value": "SECRET",
			"type": "string"
		}
	],
	"protocolProfileBehavior": {}
}
{
	"info": {
		"_postman_id": "d5933cec-5a8a-4d4d-874f-956a207c39e3",
		"name": "KSC Usage API",
		"description": "# KSC Usage API\n\nPostman collection for exploring the **KeySafe-Cloud (KSC)** Application Programming Interface (API).\n\nPlease consult the full KSC API documentation for more details, as this _\"KSC Usage API collection for Postman\"_ (version 1.2.4 dated 2025-11-27) only explores a subset of the KSC API to get started.\n\n## Usage\n\nThe _\"Use of the KSC API Access Key\"_ section below provides details on how to set the KSC API Access Key for a specific tenant inventory.\n\n### **Use of the KSC API Access Key**\n\n- Use a Postman Environment, like the _\"KSC Usage API Env\"_ provided with this collection, with the **KSC_API_KEY**\\=_SECRET_ set to your KSC API Access Key (aka API Key) for your tenant within Postman.\n    \n- This will be picked up in this collection via the **API_KEY**\\={{`KSC_API_KEY`}} setting on the collection _\"Variables\"_ tab when the _\"KSC Usage API Env\"_ environment is active (top right corner in Postman).\n    \n- The _\"All variables\"_ view in Postman can show the _\"E\"_ Environment and _\"C\"_ Collection variables that are currently active.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "1695622",
		"_collection_link": "https://test11-6340.postman.co/workspace/test~572709a5-0f24-4e69-887f-e621b80738f8/collection/1695622-d5933cec-5a8a-4d4d-874f-956a207c39e3?action=share&source=collection_link&creator=1695622"
	},
	"item": [
		{
			"name": "List all locks",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"url": {
					"raw": "https://keysafe-cloud.appspot.com/api/v1/locks",
					"protocol": "https",
					"host": [
						"keysafe-cloud",
						"appspot",
						"com"
					],
					"path": [
						"api",
						"v1",
						"locks"
					]
				},
				"description": "# List all locks\n\nList all Lock resources in your inventory. The tenant inventory is determined by the KSC API Access Key (aka API Key) used.\n\n## Usage\n\nSee the _\"Use of the KSC API Access Key\"_ section on the _\"Overview\"_ tab of the Collection for details on how to set the API Key in a Postman environment for a specific tenant inventory.\n\n### Use of Variables\n\nUpdate the _Pre-request_ script on the **Scripts** tab to set variables, which are either converted to the URL path, to query parameters (see the _Params_ tab) or to JSON request body settings (see the _Body_ tab).\n\n### Examples\n\nOn this request as-is, there are no variables; the request will try to obtain all the locks in the tenant inventory. The tenant inventory is determined by the API Key used. So when you have a development/test tenant and a production tenant, then you have to change the API Key (in the Postman environment/environments) to list locks in the different tenant inventories.\n\nFor new tenants, the response/result to this request will likely show an empty list of locks. Adding a lock to the tenant inventory can be done with the _\"Claim a lock\"_ request.."
			},
			"response": []
		},
		{
			"name": "List specific lock(s)",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// See the Docs tab for examples to set variables.\r",
							"pm.variables.set(\"lock_uids\", \"DeadBeef0000deadBEEF\");"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"url": {
					"raw": "https://keysafe-cloud.appspot.com/api/v1/locks?lock_uids={{lock_uids}}",
					"protocol": "https",
					"host": [
						"keysafe-cloud",
						"appspot",
						"com"
					],
					"path": [
						"api",
						"v1",
						"locks"
					],
					"query": [
						{
							"key": "lock_uids",
							"value": "{{lock_uids}}"
						}
					]
				},
				"description": "# List specific lock(s)\n\nList specific Lock resources in your inventory, filtered to the **lock_uids** query parameter. The tenant inventory is determined by the KSC API Access Key (aka API Key) used.\n\n## Usage\n\nSee the _\"Use of the KSC API Access Key\"_ section on the _\"Overview\"_ tab of the Collection for details on how to set the API Key in a Postman environment for a specific tenant inventory.\n\n### Use of Variables\n\nUpdate the _Pre-request_ script on the **Scripts** tab to set variables, which are either converted to the URL path, to query parameters (see the _Params_ tab) or to JSON request body settings (see the _Body_ tab).\n\n### Examples\n\nIn the following examples, with artificial Lock UID(s), the response will likely return an empty list. Adjust to values known to work in your inventory. The Lock UID is printed on the lock label, with \"-\" dashes for readability; the dashes shouldn't be used here.\n\n**Example 1** - Searching for details on just one Lock UID, showing that the capitalization of the hexadecimal _lock_uid_ value is ignored:\n\n``` javascript\npm.variables.set(\"lock_uids\", \"DeadBeef0000deadBEEF\");\n\n ```\n\n**Example 2** - Trying to list 2 Lock UIDs, will try to select locks with these specific Lock UID values (multiple, as there is a comma-separator):\n\n``` javascript\npm.variables.set(\"lock_uids\", \"deadbeef0000deadbeef,00deadbeef00deadbeef\");\n\n ```"
			},
			"response": []
		},
		{
			"name": "Retrieve lock details",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// See the Docs tab for examples to set variables.\r",
							"pm.variables.set(\"lock_id\", \"0102030405060708\");"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"url": {
					"raw": "https://keysafe-cloud.appspot.com/api/v1/locks/{{lock_id}}",
					"protocol": "https",
					"host": [
						"keysafe-cloud",
						"appspot",
						"com"
					],
					"path": [
						"api",
						"v1",
						"locks",
						"{{lock_id}}"
					]
				},
				"description": "# Retrieve lock details\n\nRetrieves the details of the Lock resource, using the _lock_id_ of that lock.\n\nRetrieving lock details for a specific lock is limited to locks in your tenant inventory. The tenant inventory is determined by the KSC API Access Key (aka API Key) used.\n\n## Usage\n\nSee the _\"Use of the KSC API Access Key\"_ section on the _\"Overview\"_ tab of the Collection for details on how to set the API Key in a Postman environment for a specific tenant inventory.\n\nUse the _\"List specific lock(s)\"_ request with a known Lock UID to find the _lock_id_ for locks in your tenant inventory. Adding a lock to the tenant inventory can be done with the _\"Claim a lock\"_ request; this will also return the _lock_id_ in the response.\n\n### Use of Variables\n\nUpdate the _Pre-request_ script on the **Scripts** tab to set variables, which are either converted to the URL path, to query parameters (see the _Params_ tab) or to JSON request body settings (see the _Body_ tab).\n\n### Examples\n\n**Example 1** - Retrieve lock details for a specific lock:\n\n``` javascript\npm.variables.set(\"lock_id\", \"0102030405060708\");\n\n ```\n\nUsing this (artificial) _lock_id_ on the _Scripts_ tab will attempt to retrieve details for a specific lock, which is unlikely to be in your inventory (as determined via the API Key used). Thus, the **404** _\"Not Found\"_ result is expected, and the description will help you interpret the error response."
			},
			"response": []
		},
		{
			"name": "Claim a lock",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// See the Docs tab for examples to set variables.",
							"pm.variables.set(\"lock_uid\", \"deadbeef0000deadbeef\");",
							"pm.variables.set(\"claim_code\", \"deadbeef00deadbeef01deadbeef0203\");",
							"pm.variables.set(\"reference\", \"Test\");"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"claim_code\": \"{{claim_code}}\",\r\n  \"lock_uid\": \"{{lock_uid}}\",\r\n  \"reference\": \"{{reference}}\"\r\n}"
				},
				"url": {
					"raw": "https://keysafe-cloud.appspot.com/api/v1/locks",
					"protocol": "https",
					"host": [
						"keysafe-cloud",
						"appspot",
						"com"
					],
					"path": [
						"api",
						"v1",
						"locks"
					]
				},
				"description": "# Claim a lock\n\nDemonstrates how to claim a lock into your tenant inventory (as specified by the API Access Key used). It requires information from the QR/DM code printed on the lock label: in \"AXA-_lock_uid_\\-_claim_code_\" format.\n\nThe target inventory is determined by the API Key provided, as it associates you with the Tenant organization.\n\nWhen claiming a lock for the first time (received from the manufacturer or another tenant): the lock will need to have the _“transferable”_ status when claimed, which is the default when delivered from the manufacturer. If so, the lock will be successfully claimed and put in your inventory; it will also automatically receive the _“active”_ status.\n\nWhen transferring between tenants, the transferring (or selling) tenant is responsible for providing the accompanying claim_code and ensuring that the lock has the _“transferable”_ status.\n\n## Usage\n\nSee the _\"Use of the KSC API Access Key\"_ section on the _\"Overview\"_ tab of the Collection for details on how to set the API Key in a Postman environment for a specific tenant inventory.\n\n### Use of Variables\n\nUpdate the _Pre-request_ script on the **Scripts** tab to set variables, which are either converted to the URL path, to query parameters (see the _Params_ tab) or to JSON request body settings (see the _Body_ tab).\n\n### Examples\n\n**Example 1** - Claim a lock with an example _\"Test\"_ reference:\n\n``` javascript\npm.variables.set(\"lock_uid\", \"deadbeef0000deadbeef\");\npm.variables.set(\"claim_code\", \"deadbeef00deadbeef01deadbeef0203\");\npm.variables.set(\"reference\", \"Test\");\n\n ```\n\nUsing this (artificial) _lock_uid_ and _claim_code_ will try to claim the artificial lock, which actually doesn't exist, and thus the **404** _\"Not Found\"_ result is expected.\n\nScan the QR/DM-code on the label of a lock to get the \"AXA-_lock_uid_-_claim_code_\" to use for claiming that lock.\n\nNote that when a lock is claimed into a specific tenant inventory, it cannot be claimed by/into another tenant unless the lock is specifically set to _\"transferable\"_ first (via the _\"Set lock status\"_ request). Claiming an already claimed lock into the same tenant inventory will work (changing the _reference_ when specified in the request)."
			},
			"response": []
		},
		{
			"name": "Obtain an eKey",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// See the Docs tab for examples to set variables.",
							"pm.variables.set(\"lock_id\", \"0102030405060708\");",
							"pm.variables.set(\"position\", \"1\");",
							"pm.variables.set(\"hours\", \"24\");",
							"pm.variables.set(\"nr_of_passkeys\", \"32\");",
							"pm.variables.set(\"tag\", \"Order #2025-678\");"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"hours\": {{hours}},\r\n  \"nr_of_passkeys\": {{nr_of_passkeys}},\r\n  \"passkey_type\": \"otp\",\r\n  \"segmented\": true,\r\n  \"tag\": \"{{tag}}\"\r\n}"
				},
				"url": {
					"raw": "https://keysafe-cloud.appspot.com/api/v1/locks/{{lock_id}}/slots/{{position}}?opt_fields=hours,lock_id,lock_uid,nr_of_passkeys",
					"protocol": "https",
					"host": [
						"keysafe-cloud",
						"appspot",
						"com"
					],
					"path": [
						"api",
						"v1",
						"locks",
						"{{lock_id}}",
						"slots",
						"{{position}}"
					],
					"query": [
						{
							"key": "opt_fields",
							"value": "hours,lock_id,lock_uid,nr_of_passkeys"
						}
					]
				},
				"description": "# Obtain an eKey\n\nObtain an _eKey_ for a given _slot position_ of a _lock_ resource in your inventory.\n\nNote that it is recommended to use the _?opt_fields=hours,lock_id,lock_uid,nr_of_passkeys_ query parameter, as it will enhance the response by adding these fields into the result. Thus making it clear what the eKey+OTPs represent.\n\nIt is also recommended for most implementation to use the eKey+OTPs approach (with _passkey_type=otp_), in which short OTPs can be send to the physical lock to initiate an open or close action. For an eKey+OTPs, the _passkey_ field in the response result is a dash _\"-\"_ separated list of _nr_of_passkeys_ OTPs.\n\n## Usage\n\nSee the _\"Use of the KSC API Access Key\"_ section on the _\"Overview\"_ tab of the Collection for details on how to set the API Key in a Postman environment for a specific tenant inventory.\n\n### Use of Variables\n\nUpdate the _Pre-request_ script on the **Scripts** tab to set variables, which are either converted to the URL path, to query parameters (see the _Params_ tab) or to JSON request body settings (see the _Body_ tab).\n\n### Examples\n\n**Example 1** - Obtain an eKey with 32 OTPs for a 24-hour rental agreement (on position 1):\n\n``` javascript\npm.variables.set(\"lock_id\", \"0102030405060708\");\npm.variables.set(\"position\", \"1\");\npm.variables.set(\"hours\", \"24\");\npm.variables.set(\"nr_of_passkeys\", \"32\");\npm.variables.set(\"tag\", \"Order #2025-678\");\n\n ```\n\nThe top _lock_id_ and _position_ variables in this example will be used in the request URL, while the other 3 variables (_hours_, _nr_of_passkeys_, and _tag_) will be set in the request body. Note on the _Body_ tab that the _passkey_type_ and _segmented_ fields are predefined in the request body JSON; they can be changed, but it is recommended to use only the eKey+OTPs approach for typical implementations.\n\n**Example 2** - Obtain an eKey with 16 OTPs for 8 hours on position 0 (to be used by a mechanic, servicing the bike/lock):\n\n``` javascript\npm.variables.set(\"lock_id\", \"0102030405060708\");\npm.variables.set(\"position\", \"0\");\npm.variables.set(\"hours\", \"8\");\npm.variables.set(\"nr_of_passkeys\", \"16\");\npm.variables.set(\"tag\", \"Service ticket REPAIR-074\");\n\n ```\n\nWhile examples, this shows how a mechanic could be provided a special eKey on _position=0_ that could be used while the end-user in a rental agreement could use a normal eKey on _position=1_ for the same bike/lock. This allows the mechanic to service the bike while the end-user is, for example, in a museum or a hotel. When serviced (and relocked by the mechanic), the end-user could continue under the existing rental agreement (using the eKey+OTPs on _position=1_ already on the end-user device).\n\n**Example 3** - Obtain a special eKey with -1 hours to invalidate prior eKeys:\n\n``` javascript\npm.variables.set(\"lock_id\", \"0102030405060708\");\npm.variables.set(\"position\", \"1\");\npm.variables.set(\"hours\", \"-1\");\npm.variables.set(\"nr_of_passkeys\", \"1\");\npm.variables.set(\"tag\", \"Invalidate prior eKeys\");\n\n ```\n\nRequesting an eKey with **hours=-1** hours is a special case. To obtain an eKey that, when loaded into the physical lock, invalidates all previous ones (all eKeys with a lower _sequence_), without a new agreement starting (on this _slot_position_)."
			},
			"response": []
		},
		{
			"name": "Set lock status",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// See the Docs tab for examples to set variables.",
							"pm.variables.set(\"lock_id\", \"0102030405060708\");",
							"pm.variables.set(\"new_status\", \"defect\");",
							"pm.variables.set(\"reference\", \"Bike repair planned\");"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"lock_status\": \"{{new_status}}\",\r\n  \"reference\": \"{{reference}}\"\r\n}"
				},
				"url": {
					"raw": "https://keysafe-cloud.appspot.com/api/v1/locks/{{lock_id}}/status",
					"protocol": "https",
					"host": [
						"keysafe-cloud",
						"appspot",
						"com"
					],
					"path": [
						"api",
						"v1",
						"locks",
						"{{lock_id}}",
						"status"
					]
				},
				"description": "# Set lock status\n\nSet the _lock_status_ (and optionally the _reference_) of a given lock resource in your inventory. Consult the Pricing documentation for all states and their impacts/limitations.\n\n## Usage\n\nSee the _\"Use of the KSC API Access Key\"_ section on the _\"Overview\"_ tab of the Collection for details on how to set the API Key in a Postman environment for a specific tenant inventory.\n\n### Use of Variables\n\nUpdate the _Pre-request_ script on the **Scripts** tab to set variables, which are either converted to the URL path, to query parameters (see the _Params_ tab) or to JSON request body settings (see the _Body_ tab).\n\n### Examples\n\n**Example 1** - Set lock status to _defect_ to avoid eKeys being requested, for example, when the bike will not be rented out until the bike is repaired:\n\n``` javascript\npm.variables.set(\"lock_id\", \"0102030405060708\");\npm.variables.set(\"new_status\", \"defect\");\npm.variables.set(\"reference\", \"Bike repair planned\");\n\n ```\n\nThe top _lock_id_ in this example will be used in the request URL, while the other 2 variables (_new_status_ and _reference_) will be set in the request body.\n\nRequesting eKeys for _defect_, _lost_, or _stolen_ locks is not possible. To request an eKey for inactive locks, you will need to set the KSC lock status to _active_ again. This is shown in the second example below.\n\n**Example 2** - Set lock status back to _active_ when the bike/lock can be used again:\n\n``` javascript\npm.variables.set(\"lock_id\", \"0102030405060708\");\npm.variables.set(\"new_status\", \"active\");\npm.variables.set(\"reference\", \"\");\n\n ```\n\nUsing an empty _reference_ (effectively a \"\" string in the JSON body of the request) will clear any prior _reference_; as can be seen in the response result.\n\n**Example 3** - Set lock status to _stored_ when the bike/lock will not be used for a long time, like in off-season months:\n\n``` javascript\npm.variables.set(\"lock_id\", \"0102030405060708\");\npm.variables.set(\"new_status\", \"stored\");\npm.variables.set(\"reference\", \"\");\n\n ```\n\nNote that requesting eKeys for _stored_ locks is possible, and the lock will be set to _active_ automatically. allowing the eKey to be obtained without delay (see the _\"Obtain an eKey\"_ request)."
			},
			"response": []
		}
	],
	"auth": {
		"type": "apikey",
		"apikey": [
			{
				"key": "value",
				"value": "{{API_KEY}}",
				"type": "string"
			},
			{
				"key": "key",
				"value": "X-API-Key",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "API_KEY",
			"value": "SECRET"
		}
	]
}